!function(e){function t(t){for(var i,n,c=t[0],a=t[1],u=t[2],y=0,l=[];y<c.length;y++)n=c[y],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&l.push(o[n][0]),o[n]=0;for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i]);for(d&&d(t);l.length;)l.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],i=!0,c=1;c<r.length;c++){var a=r[c];0!==o[a]&&(i=!1)}i&&(s.splice(t--,1),e=n(n.s=r[0]))}return e}var i={},o={0:0},s=[];function n(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var c=window.webpackJsonp=window.webpackJsonp||[],a=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var d=a;s.push([121,1]),r()}({121:function(e,t,r){r(122),r(309),e.exports=r(308)},308:function(e,t,r){},309:function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}r.r(t);var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.field=null,this.fieldArea=null,this.fieldText="",this.cursorPos=0,this.infoBlock=null,this.keyboard=null,this.ctrlKey=!1,this.shiftKey=!1,this.altKey=!1,this.capsLockKey=!1,this.keyboardLayout=null,this.keys=[[{key:{en:"`",ru:"ё"},shiftKey:{en:"~",ru:"Ё"},code:"Backquote"},{key:"1",shiftKey:{en:"!",ru:"!"},code:"Digit1"},{key:"2",shiftKey:{en:"@",ru:'"'},code:"Digit2"},{key:"3",shiftKey:{en:"#",ru:"№"},code:"Digit3"},{key:"4",shiftKey:{en:"$",ru:";"},code:"Digit4"},{key:"5",shiftKey:{en:"%",ru:"%"},code:"Digit5"},{key:"6",shiftKey:{en:"^",ru:":"},code:"Digit6"},{key:"7",shiftKey:{en:"&",ru:"?"},code:"Digit7"},{key:"8",shiftKey:{en:"*",ru:"*"},code:"Digit8"},{key:"9",shiftKey:{en:"(",ru:"("},code:"Digit9"},{key:"0",shiftKey:{en:")",ru:")"},code:"Digit0"},{key:"-",shiftKey:{en:"_",ru:"_"},code:"Minus"},{key:"=",shiftKey:{en:"+",ru:"+"},code:"Equal"},{key:"Backspace",code:"Backspace"}],[{key:"Tab",code:"Tab"},{key:{en:"q",ru:"й"},shiftKey:{en:"Q",ru:"Й"},code:"KeyQ"},{key:{en:"w",ru:"ц"},shiftKey:{en:"W",ru:"Ц"},code:"KeyW"},{key:{en:"e",ru:"у"},shiftKey:{en:"E",ru:"У"},code:"KeyE"},{key:{en:"r",ru:"к"},shiftKey:{en:"R",ru:"К"},code:"KeyR"},{key:{en:"t",ru:"е"},shiftKey:{en:"T",ru:"Е"},code:"KeyT"},{key:{en:"y",ru:"н"},shiftKey:{en:"Y",ru:"Н"},code:"KeyY"},{key:{en:"u",ru:"г"},shiftKey:{en:"U",ru:"Г"},code:"KeyU"},{key:{en:"i",ru:"ш"},shiftKey:{en:"I",ru:"Ш"},code:"KeyI"},{key:{en:"o",ru:"щ"},shiftKey:{en:"O",ru:"Щ"},code:"KeyO"},{key:{en:"p",ru:"з"},shiftKey:{en:"P",ru:"З"},code:"KeyP"},{key:{en:"[",ru:"х"},shiftKey:{en:"{",ru:"Х"},code:"BracketLeft"},{key:{en:"]",ru:"ъ"},shiftKey:{en:"}",ru:"Ъ"},code:"BracketRight"},{key:"\\",shiftKey:{en:"|",ru:"/"},code:"Backslash"},{key:"Del",code:"Delete"}],[{key:"Caps lock",code:"CapsLock"},{key:{en:"a",ru:"ф"},shiftKey:{en:"A",ru:"Ф"},code:"KeyA"},{key:{en:"s",ru:"ы"},shiftKey:{en:"S",ru:"Ы"},code:"KeyS"},{key:{en:"d",ru:"в"},shiftKey:{en:"D",ru:"В"},code:"KeyD"},{key:{en:"f",ru:"а"},shiftKey:{en:"F",ru:"А"},code:"KeyF"},{key:{en:"g",ru:"п"},shiftKey:{en:"G",ru:"П"},code:"KeyG"},{key:{en:"h",ru:"р"},shiftKey:{en:"H",ru:"Р"},code:"KeyH"},{key:{en:"j",ru:"о"},shiftKey:{en:"J",ru:"О"},code:"KeyJ"},{key:{en:"k",ru:"л"},shiftKey:{en:"K",ru:"Л"},code:"KeyK"},{key:{en:"l",ru:"д"},shiftKey:{en:"L",ru:"Д"},code:"KeyL"},{key:{en:";",ru:"ж"},shiftKey:{en:":",ru:"Ж"},code:"Semicolon"},{key:{en:"'",ru:"э"},shiftKey:{en:'"',ru:"Є"},code:"Quote"},{key:"Enter",code:"Enter"}],[{key:"Shift",code:"ShiftLeft"},{key:{en:"z",ru:"я"},shiftKey:{en:"Z",ru:"Я"},code:"KeyZ"},{key:{en:"x",ru:"ч"},shiftKey:{en:"X",ru:"Ч"},code:"KeyX"},{key:{en:"c",ru:"с"},shiftKey:{en:"C",ru:"С"},code:"KeyC"},{key:{en:"v",ru:"м"},shiftKey:{en:"V",ru:"М"},code:"KeyV"},{key:{en:"b",ru:"и"},shiftKey:{en:"B",ru:"И"},code:"KeyB"},{key:{en:"n",ru:"т"},shiftKey:{en:"N",ru:"Т"},code:"KeyN"},{key:{en:"m",ru:"ь"},shiftKey:{en:"M",ru:"Ь"},code:"KeyM"},{key:{en:",",ru:"б"},shiftKey:{en:"<",ru:"Б"},code:"Comma"},{key:{en:".",ru:"ю"},shiftKey:{en:">",ru:"Ю"},code:"Period"},{key:{en:"/",ru:"."},shiftKey:{en:"?",ru:","},code:"Slash"},{key:"▲",code:"ArrowUp"},{key:"Shift",code:"ShiftRight"}],[{key:"Ctrl",code:"ControlLeft"},{key:"Win",code:"MetaLeft"},{key:"Alt",code:"AltLeft"},{key:"",code:"Space"},{key:"Alt",code:"AltRight"},{key:"◄",code:"ArrowLeft"},{key:"▼",code:"ArrowDown"},{key:"►",code:"ArrowRight"},{key:"Ctrl",code:"ControlRight"}]]}var t,r,o;return t=e,(r=[{key:"createKeyboard",value:function(){var e=this;this.keyboard=document.createElement("div"),this.keyboard.classList.add("keyboard"),this.keys.forEach((function(t){var r=document.createElement("div");r.classList.add("keyboard__row"),t.forEach((function(t){var i=document.createElement("div");i.classList.add("key"),i.dataset.code=t.code,i.innerText="string"==typeof t.key?t.key:t.key[e.keyboardLayout],"Space"===t.code&&i.classList.add("space"),t.code.includes("Shift")&&i.classList.add("shift"),r.append(i)})),e.keyboard.append(r)}))}},{key:"createTextField",value:function(){this.field=document.createElement("div"),this.field.classList.add("field"),this.fieldArea=document.createElement("textarea"),this.fieldArea.classList.add("field__item"),this.field.append(this.fieldArea)}},{key:"createInfoBlock",value:function(){this.infoBlock=document.createElement("div");var e=document.createElement("p");e.innerText="Сделано в ОС Windows";var t=document.createElement("p");t.innerText="Смена языка ввода - 'Left Alt' + 'Shift'",this.infoBlock.append(e,t)}},{key:"generateDocument",value:function(){this.createTextField(),this.createKeyboard(),this.createInfoBlock();var e=document.createElement("div");e.classList.add("container"),e.append(this.field,this.keyboard,this.infoBlock),document.body.append(e)}},{key:"addDocumentKeyHandler",value:function(){var e=this;this.fieldArea.addEventListener("click",(function(){e.updateCursorPosition(e.fieldArea.selectionStart)})),this.fieldArea.addEventListener("keydown",(function(t){t.preventDefault(),e.keyDownListener(t)})),document.addEventListener("keydown",(function(t){document.activeElement!==e.fieldArea&&e.keyDownListener(t)})),document.addEventListener("keyup",(function(t){var r=document.querySelector('[data-code="'.concat(t.code,'"]'));e.capsLockKey&&"CapsLock"===t.code||(r&&r.classList.remove("key_active"),t.code.includes("Shift")&&e.shiftPress(!1),t.code.includes("Control")&&e.ctrlPress(!1),t.code.includes("Alt")&&e.altPress(!1))}))}},{key:"addDocumentMouseHandler",value:function(){var e=this;this.keyboard.addEventListener("mousedown",(function(e){if(e.preventDefault(),e.target.classList.contains("key")){if(e.target.classList.contains("key_active"))return void e.preventDefault();e.target.classList.add("key_active")}})),this.keyboard.addEventListener("mouseup",(function(t){if(t.preventDefault(),t.target.classList.contains("key")){var r=t.target.dataset.code,i=e.getKeyEl(r);if("CapsLock"===i.code&&e.capsLockPress(!e.capsLockKey),i.code.includes("Arrow")){var o=new KeyboardEvent("keydown",{code:i.code});e.field.dispatchEvent(o)}if(e.ctrlKey||e.altKey||e.updateFieldText(i),e.capsLockKey&&"CapsLock"===i.code)return;t.target.classList.remove("key_active")}})),this.keyboard.addEventListener("mouseout",(function(t){if(t.target.classList.contains("key")){var r=t.target.dataset.code;if(e.capsLockKey&&"CapsLock"===r)return;t.target.classList.contains("key_active")&&t.target.classList.remove("key_active")}}))}},{key:"keyDownListener",value:function(e){var t=document.querySelector('[data-code="'.concat(e.code,'"]'));if(null!==t){var r=this.keys.find((function(t){return t.find((function(t){return t.code===e.code}))})),i=r.find((function(t){return t.code===e.code}));r?(("Tab"===e.code||e.code.includes("Alt"))&&e.preventDefault(),e.code.includes("Shift")&&this.shiftPress(!0),e.code.includes("Control")&&this.ctrlPress(!0),e.code.includes("Alt")&&this.altPress(!0),"CapsLock"===e.code&&this.capsLockPress(!this.capsLockKey),t.classList.add("key_active"),this.ctrlKey||this.altKey||this.updateFieldText(i)):e.preventDefault()}}},{key:"updateFieldText",value:function(e){var t="";switch(e.code){case"Backspace":if(0===this.cursorPos)break;this.fieldText=this.fieldText.slice(0,this.cursorPos-1)+this.fieldText.slice(this.cursorPos),this.updateCursorPosition(this.cursorPos-1);break;case"Tab":t="\t";break;case"Space":t=" ";break;case"Enter":t="\n";break;case"Delete":this.fieldText=this.fieldText.slice(0,this.cursorPos)+this.fieldText.slice(this.cursorPos+1);break;case(e.code.match(/Arrow/)||{}).input:return void this.arrowPress(e.code);case(e.code.match(/Meta|CapsLock|Alt|Control|Shift/)||{}).input:return;default:t=this.shiftKey&&e.shiftKey&&!this.altKey?e.shiftKey[this.keyboardLayout]:this.capsLockKey&&e.shiftKey?("string"==typeof e.key?e.key:e.key[this.keyboardLayout]).toUpperCase():"string"==typeof e.key?e.key:e.key[this.keyboardLayout]}this.fieldText=this.fieldText.slice(0,this.cursorPos)+t+this.fieldText.slice(this.cursorPos),this.fieldArea.value=this.fieldText,this.updateCursorPosition(this.cursorPos+t.length)}},{key:"updateCursorPosition",value:function(e){e<0||e>this.fieldArea.value.length||(this.cursorPos=e,this.setCursorPosition(this.cursorPos))}},{key:"arrowPress",value:function(e){"ArrowLeft"===e?this.updateCursorPosition(this.cursorPos-1):"ArrowRight"===e?this.updateCursorPosition(this.cursorPos+1):"ArrowUp"===e?this.setNewPositionByArrowPress("up"):"ArrowDown"===e&&this.setNewPositionByArrowPress("down")}},{key:"setNewPositionByArrowPress",value:function(e){for(var t=this.fieldArea.value.split("\n"),r=this.cursorPos,i=0;i<t.length;i+=1){var o=t[i];if(o.length<r)r-=o.length+1;else if(o.length>=r){if(0===i&&"up"===e)this.updateCursorPosition(0);else if(i===t.length-1&&"down"===e)this.updateCursorPosition(this.fieldArea.value.length);else if("up"===e){var s=t[i-1];if(r+1>s.length){var n=this.cursorPos-r-1;this.updateCursorPosition(n)}else{var c=this.cursorPos-s.length-1;this.updateCursorPosition(c)}}else if("down"===e){var a=t[i+1];if(r>a.length){var u=this.cursorPos-r+o.length+a.length+1;this.updateCursorPosition(u)}else{var d=this.cursorPos+o.length+1;this.updateCursorPosition(d)}}break}}}},{key:"setCursorPosition",value:function(e){this.fieldArea.setSelectionRange(e,e)}},{key:"getKeyEl",value:function(e){return this.keys.find((function(t){return t.find((function(t){return t.code===e}))})).find((function(t){return t.code===e}))}},{key:"getKeyboardLayout",value:function(){var e=localStorage.getItem("keyboardLayout");this.keyboardLayout=e||"ru"}},{key:"setKeyboardLayout",value:function(){this.keyboardLayout="ru"===this.keyboardLayout?"en":"ru",localStorage.setItem("keyboardLayout",this.keyboardLayout)}},{key:"shiftPress",value:function(e){this.shiftKey=e,e&&this.altKey&&this.setKeyboardLayout(),this.reRender()}},{key:"capsLockPress",value:function(e){this.capsLockKey=e,this.reRender()}},{key:"altPress",value:function(e){this.altKey=e}},{key:"ctrlPress",value:function(e){this.ctrlKey=e}},{key:"reRender",value:function(){var e=this;this.keys.forEach((function(t){t.forEach((function(t){var r=e.keyboard.querySelector('[data-code="'.concat(t.code,'"]'));e.shiftKey&&t.shiftKey&&!e.altKey?r.innerText=t.shiftKey[e.keyboardLayout]:e.capsLockKey&&t.shiftKey?r.innerText=r.innerText.toUpperCase():"string"!=typeof t.key?r.innerText=t.key[e.keyboardLayout]:"string"==typeof t.key&&(r.innerText=t.key)}))}))}},{key:"init",value:function(){this.getKeyboardLayout(),this.generateDocument(),this.addDocumentKeyHandler(),this.addDocumentMouseHandler()}}])&&i(t.prototype,r),o&&i(t,o),e}();window.onload=function(){(new o).init()}}});